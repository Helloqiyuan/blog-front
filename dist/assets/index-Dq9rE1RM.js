import{d as h,p as c,O as k,c as V,a as l,b as o,w as t,e as n,A as g,B as v,u as A,P as B,n as C,t as S,E as r,Q as E,o as I,_ as K}from"./index-JbcahPOn.js";import{h as N}from"./request-BUaVHz46.js";import"./utils-CDasQK9Z.js";const q=p=>N({url:"/admin/login",method:"post",data:p}),R={class:"login-container"},T={class:"login-wrapper"},U={class:"login-card"},D=h({__name:"index",setup(p){const a=c({account:"",password:""}),w=k(),s=c(!1),m=c(),x={account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},d=()=>{m.value.validate(async f=>{if(f){s.value=!0;try{const e=await q(a.value);e.data?.token?(localStorage.setItem("adminToken",e.data.token),r.success("登录成功"),w.setAdminInfo(e.data),E.push("/dashboard")):r.error(e.message)}catch(e){r.error("登录异常"+e)}finally{s.value=!1}}else r.warning("请填写完整的登录信息")})};return(f,e)=>{const _=n("el-input"),i=n("el-form-item"),y=n("el-button"),b=n("el-form");return I(),V("div",R,[l("div",T,[l("div",U,[e[2]||(e[2]=l("h1",{class:"login-title"},"登录",-1)),e[3]||(e[3]=l("p",{class:"login-subtitle"},"请输入您的用户名和密码登录",-1)),o(b,{model:a.value,ref_key:"formRef",ref:m,rules:x,class:"login-form"},{default:t(()=>[o(i,{prop:"account"},{default:t(()=>[o(_,{modelValue:a.value.account,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.account=u),type:"text",placeholder:"请输入账号","prefix-icon":v(A),clearable:"",onKeydown:g(d,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(i,{prop:"password"},{default:t(()=>[o(_,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.password=u),type:"password",placeholder:"请输入密码","prefix-icon":v(B),"show-password":"",clearable:"",onKeydown:g(d,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(i,null,{default:t(()=>[o(y,{type:"primary",class:"login-button",loading:s.value,onClick:d,block:""},{default:t(()=>[C(S(s.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}}),P=K(D,[["__scopeId","data-v-af28e0fa"]]);export{P as default};
