import{d as h,s as c,J as k,c as V,a as l,b as o,w as t,e as n,C as g,E as v,u as C,K,p as S,t as q,H as r,L as A,q as B,_ as E}from"./index-D1KBpVxX.js";import{h as I}from"./request-D5U2g9j6.js";import"./utils-C4zQBKTc.js";const L=p=>I({url:"/admin/login",method:"post",data:p}),N={class:"login-container"},R={class:"login-wrapper"},T={class:"login-card"},U=h({__name:"index",setup(p){const a=c({account:"",password:""}),w=k(),s=c(!1),m=c(),x={account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},d=()=>{m.value.validate(async f=>{if(f){s.value=!0;try{const e=await L(a.value);e.data?.token?(localStorage.setItem("adminToken",e.data.token),r.success("登录成功"),w.setAdminInfo(e.data),A.push("/dashboard")):r.error(e.message)}catch(e){r.error("登录异常"+e)}finally{s.value=!1}}else r.warning("请填写完整的登录信息")})};return(f,e)=>{const _=n("el-input"),i=n("el-form-item"),y=n("el-button"),b=n("el-form");return B(),V("div",N,[l("div",R,[l("div",T,[e[2]||(e[2]=l("h1",{class:"login-title"},"登录",-1)),e[3]||(e[3]=l("p",{class:"login-subtitle"},"请输入您的用户名和密码登录",-1)),o(b,{model:a.value,ref_key:"formRef",ref:m,rules:x,class:"login-form"},{default:t(()=>[o(i,{prop:"account"},{default:t(()=>[o(_,{modelValue:a.value.account,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.account=u),type:"text",placeholder:"请输入账号","prefix-icon":v(C),clearable:"",onKeydown:g(d,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(i,{prop:"password"},{default:t(()=>[o(_,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.password=u),type:"password",placeholder:"请输入密码","prefix-icon":v(K),"show-password":"",clearable:"",onKeydown:g(d,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(i,null,{default:t(()=>[o(y,{type:"primary",class:"login-button",loading:s.value,onClick:d,block:""},{default:t(()=>[S(q(s.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}}),M=E(U,[["__scopeId","data-v-2f3ee2d0"]]);export{M as default};
